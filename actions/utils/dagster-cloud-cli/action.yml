name: "dagster-cloud ci <command>"
description: "Run a dagster-cloud cli command"
inputs:
  command:
    required: true
    description: "The dagster-cloud cli command to run"

outputs:
  run_id:
    description: "The run ID returned by the command"
    value: ${{ steps.dagster-cloud-cli.outputs.run_id }}

runs:
  using: "composite"
  steps:
    - id: dagster-cloud-cli
      run: |
        output=$($GITHUB_ACTION_PATH/../../../generated/gha/dagster-cloud.pex -m dagster_cloud_cli.entrypoint ${{ inputs.command }})
        echo "$output"
        echo "run_id=$output" >> $GITHUB_OUTPUT
      shell: bash
